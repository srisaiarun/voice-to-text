<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice2Text â€” Upload</title>
    <style>
        :root{--bg:#f3f6fb;--card:#ffffff;--muted:#6b7280;--accent:#5b8def}
        *{box-sizing:border-box}
        body{font-family:Inter,Segoe UI,Helvetica,Arial,sans-serif;background:var(--bg);margin:0;padding:36px;}
        .wrap{max-width:900px;margin:24px auto;display:grid;grid-template-columns:1fr 420px;gap:28px}
        .card{background:var(--card);border-radius:12px;padding:22px;box-shadow:0 6px 30px rgba(20,30,60,0.06);}
        .hero{display:flex;align-items:center;gap:16px}
        .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#67d6ff);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
        h1{font-size:20px;margin:0}
        p.lead{margin:6px 0 0 0;color:var(--muted)}

        form.uploader{margin-top:18px;display:flex;flex-direction:column;gap:14px}
        .file-drop{border:2px dashed rgba(90,110,140,0.12);padding:18px;border-radius:10px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;cursor:pointer}
        .file-drop input[type=file]{display:none}
        .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:600}
        .muted{color:var(--muted);font-size:14px}

        /* Right column */
        .right{display:flex;flex-direction:column;gap:16px}
        .player{display:flex;flex-direction:column;gap:8px}
        .transcription{white-space:pre-wrap;color:#111;line-height:1.6}
        .empty{padding:18px;border-radius:8px;background:#fbfdff;border:1px solid rgba(90,110,140,0.04);color:var(--muted)}

        @media (max-width:900px){.wrap{grid-template-columns:1fr; padding:0 12px}}
    </style>
</head>
<body>
    <div class="wrap">
        <div class="card">
            <div class="hero">
                <div class="logo">V2T</div>
                <div>
                    <h1>Upload audio to transcribe</h1>
                    <p class="lead">Drop a WAV/MP3 file or click to select. Google speech API transcribes short files.</p>
                </div>
            </div>

            <form class="uploader" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <label class="file-drop" for="id_file">
                    <strong>Choose or drop a file</strong>
                    <span class="muted">Maximum file size depends on server configuration</span>
                    {{ form.file }}
                </label>

                <div style="display:flex;gap:10px;align-items:center">
                    <button class="btn" type="submit">Upload & Transcribe</button>
                    <span class="muted">or use sample file in `media/`</span>
                </div>
            </form>
        </div>

        <div class="right">
            <div class="card player">
                <h3 style="margin:0 0 8px 0">Preview & Result</h3>
                {% if audio_url %}
                <div>
                    <audio controls style="width:100%" src="{{ audio_url }}"></audio>
                    <p class="muted" style="margin:8px 0 0 0">Playing: <code>{{ audio_url }}</code></p>
                </div>
                {% else %}
                <div class="empty">No audio uploaded yet. Upload a file to see the player and transcription.</div>
                {% endif %}
            </div>

            <div class="card">
                <h3 style="margin:0 0 8px 0">Transcription</h3>
                {% if output %}
                <div class="transcription">{{ output }}</div>
                {% else %}
                <div class="empty">Transcription output will appear here after uploading.</div>
                {% endif %}
            </div>
        </div>
    </div>

    <script>
        // Enhance file input UI: clicking the label opens file selector
        document.addEventListener('click', function(e){
            const drop = document.querySelector('.file-drop');
            if(!drop) return;
            if(e.target.closest('.file-drop')){
                const input = document.querySelector('.file-drop input[type=file]');
                if(input) input.click();
            }
        });
    </script>
</body>
</html>
